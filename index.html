<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indoor Path Drawing</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Set up the scene
        const scene = new THREE.Scene();
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Set up the camera
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 5);
        camera.lookAt(0, 0, 0);

        // Variables for path drawing
        let isDrawing = false;
        const pathPoints = [];

        // Event listener for touch start
        document.addEventListener('touchstart', onTouchStart);

        function onTouchStart(event) {
            isDrawing = true;
            const touch = event.touches[0];
            const x = (touch.clientX / window.innerWidth) * 2 - 1;
            const y = -(touch.clientY / window.innerHeight) * 2 + 1;
            addPointToPath(x, y);
        }

        // Event listener for touch move
        document.addEventListener('touchmove', onTouchMove);

        function onTouchMove(event) {
            if (isDrawing) {
                const touch = event.touches[0];
                const x = (touch.clientX / window.innerWidth) * 2 - 1;
                const y = -(touch.clientY / window.innerHeight) * 2 + 1;
                addPointToPath(x, y);
            }
        }

        // Event listener for touch end
        document.addEventListener('touchend', onTouchEnd);

        function onTouchEnd() {
            isDrawing = false;
        }

        // Function to add a point to the path
        function addPointToPath(x, y) {
            const point = new THREE.Vector3(x, y, 0);
            pathPoints.push(point);
            renderPath();
        }

        // Function to render the path
        function renderPath() {
            // Clear previous path
            scene.children = scene.children.filter(child => !child.isLine);

            // Create geometry for the path
            const geometry = new THREE.BufferGeometry().setFromPoints(pathPoints);

            // Create material for the path
            const material = new THREE.LineBasicMaterial({ color: 0xff0000 });

            // Create the line object
            const line = new THREE.Line(geometry, material);
            line.isLine = true;

            // Add the line to the scene
            scene.add(line);

            // Render the scene
            renderer.render(scene, camera);
        }

        // Render loop
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
